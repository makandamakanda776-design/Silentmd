<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SILENT NODIE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f0f0f;
  color:white;
}

/* Header */
header{
  background:#000;
  padding:12px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  position:sticky;
  top:0;
  z-index:10;
}

/* Search bar */
.search-box{
  padding:8px;
  text-align:center;
  background:#111;
}
.search-box input{
  width:60%;
  padding:10px;
  border-radius:20px;
  border:none;
}
.search-box button{
  padding:10px 18px;
  border:none;
  border-radius:20px;
  background:red;
  color:white;
  margin-left:5px;
  cursor:pointer;
}

/* Categories */
.categories{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding:8px;
  background:#000;
}
.categories button{
  padding:8px 15px;
  border:none;
  border-radius:20px;
  background:#222;
  color:white;
  cursor:pointer;
  flex-shrink:0;
}
.categories button.active{
  background:red;
}

/* Main video */
.player{
  width:100%;
  aspect-ratio:16/9;
  background:black;
}
.player iframe{
  width:100%;
  height:100%;
  border:none;
}

/* Video list */
.list{
  padding:10px;
}
.video-item{
  display:flex;
  gap:10px;
  margin-bottom:12px;
  cursor:pointer;
}
.video-item img{
  width:160px;
  border-radius:10px;
}
.video-item div{
  font-size:14px;
}
</style>
</head>

<body>

<header>SILENT NODIE</header>

<div class="search-box">
  <input id="search" placeholder="Search videos...">
  <button onclick="searchVideos()">Search</button>
</div>

<!-- Categories -->
<div class="categories" id="categories">
  <button class="active" onclick="setCategory('')">Trending</button>
  <button onclick="setCategory('music')">Music</button>
  <button onclick="setCategory('movies trailer')">Movies</button>
  <button onclick="setCategory('comedy')">Comedy</button>
  <button onclick="setCategory('gaming')">Gaming</button>
</div>

<!-- MAIN VIDEO PLAYER -->
<div class="player">
  <iframe id="mainPlayer" allowfullscreen></iframe>
</div>

<!-- VIDEO LIST -->
<div class="list" id="list"></div>

<script>
const API_KEY = "AIzaSyDgxdDAvD9i5zTcssH-CKNpBudb8UilNcA";
let currentCategory = "";
let lastQuery = "";

// Set category
function setCategory(cat){
  currentCategory = cat;
  document.querySelectorAll(".categories button").forEach(btn=>{
    btn.classList.remove("active");
  });
  Array.from(document.querySelectorAll(".categories button")).forEach(btn=>{
    if(btn.innerText.toLowerCase()=== (cat || "trending")) btn.classList.add("active");
  });
  searchVideos(lastQuery || ""); // search category term
}

// Search videos
function searchVideos(query){
  const q = query || document.getElementById("search").value;
  if(!q && !currentCategory) return alert("Type something or select a category");
  lastQuery = q || currentCategory || "trending";

  const searchTerm = currentCategory ? currentCategory : lastQuery;

  fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&maxResults=8&q=${searchTerm}&key=${API_KEY}`)
  .then(res=>res.json())
  .then(data=>{
    if(!data.items){
      alert("API error or quota reached");
      return;
    }
    const list = document.getElementById("list");
    list.innerHTML = "";

    data.items.forEach((item,index)=>{
      const videoId = item.id.videoId;
      const title = item.snippet.title;
      const thumb = item.snippet.thumbnails.medium.url;

      if(index===0) playVideo(videoId);

      list.innerHTML += `
        <div class="video-item" onclick="playVideo('${videoId}')">
          <img src="${thumb}">
          <div>${title}</div>
        </div>
      `;
    });
  });
}

// Play video
function playVideo(id){
  document.getElementById("mainPlayer").src =
    `https://www.youtube.com/embed/${id}?playsinline=1`;
}

// Load trending by default
searchVideos("trending");
</script>

</body>
</html>